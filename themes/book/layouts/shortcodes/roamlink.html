{{ if gt (len .Params) 0 }}{{ $keys := (split (index .Params 0) "#") }}{{ $tag := "" }}{{ if (gt (len $keys) 1) }}{{ $tag = (index $keys 1 | replaceRE "[^\\d\\sA-Za-z\u4e00-\u9fa5]" "" | replaceRE "\\s" "-" | lower) }}{{ end }}{{ $key := (index $keys 0) }}{{ $ref := "" }}{{ range .Site.Pages }}{{ if and .File (eq (len $ref) 0) }}{{ if (strings.HasSuffix (replace (strings.TrimRight ".md" .File.Path) "\\" "/") $key) }}{{ $ref = .RelPermalink }}{{ end }}{{ end }}{{ end }}{{ $ref }}{{ if $tag }}#{{ $tag }}{{ end }}{{ end }}