{{ if gt (len .Params) 0 }}<!-- 输入解析 -->{{ $keys := (split (index .Params 0) "#") }}{{ $tag := "" }}{{ if (gt (len $keys) 1) }}<!-- 定位锚点 -->{{ $tag = (index $keys 1  | urlize | lower) }}{{ end }}{{ $key := (index $keys 0) }}<!-- 扩展名解析 -->{{ if not (findRE "\\.[^.]*$" $key) }}{{ $key = add $key ".md" }}{{ end }}<!-- 没有扩展名，则默认md文件 ，否则搜索资源文件 -->{{ if (strings.HasSuffix $key "md")  }}{{ relref . $key }}{{ if $tag }}#{{ $tag }}{{ end }}{{ else }}<!-- 解析资源路径 -->{{ $dir := (path.Split $key) }}{{ $key = $dir.File }}{{ if gt (len $dir.Dir) 0 }}<!-- 含资源路径的情况 -->{{ relref . $dir.Dir }}{{ $key }}{{ else }}<!-- 不含资源路径，则进一步搜索 -->{{ $rel :=  0  }}{{ range where .Site.Pages "Kind" "section" }}{{ if not $rel }}{{ $rel =  (.Resources.GetMatch $key)  }}{{ end }}{{ end }}{{ if $rel }}{{ ($rel).RelPermalink }}{{ end }}{{ end }}{{ end }}{{ end }}